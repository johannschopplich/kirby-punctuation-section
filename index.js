(function(){"use strict";function c(e,t,n,s,l,a,o,p){var i=typeof e=="function"?e.options:e;return t&&(i.render=t,i.staticRenderFns=n,i._compiled=!0),i._scopeId="data-v-"+a,{exports:e,options:i}}const r={props:{fieldsets:{type:Object,required:!0},clipboard:{type:Boolean,default:!1}},data(){return{label:null,text:[],theme:null,activeChar:null,categoryIndex:null,lastFocusedElement:null,lastSelection:null}},async created(){const e=await this.load();this.label=e.label,this.theme=e.theme||"none",this.text=this.fieldsets.map(t=>({...t,label:this.t(t.label),help:t.help?this.t(t.help):!1}))},mounted(){document.addEventListener("focus",this.handleEditabeFocus,{capture:!0}),document.addEventListener("blur",this.handleInputBlur,{capture:!0}),document.addEventListener("click",this.handleDocumentClick)},beforeDestroy(){document.removeEventListener("focus",this.handleEditabeFocus,{capture:!0}),document.removeEventListener("blur",this.handleInputBlur,{capture:!0}),document.removeEventListener("click",this.handleDocumentClick)},methods:{t(e){return!e||typeof e=="string"?e:e[this.$panel.translation.code]??Object.values(e)[0]},handleEditabeFocus(e){const t=e.target;if(t.isContentEditable){const n=window.getSelection();if(n.rangeCount===0)return;this.lastFocusedElement=t,this.lastSelection=n.getRangeAt(0).cloneRange()}},handleInputBlur(e){const t=e.target;(t.tagName==="INPUT"||t.tagName==="TEXTAREA")&&(this.lastFocusedElement=t,this.lastSelection={start:t.selectionStart,end:t.selectionEnd})},handleDocumentClick(e){const t=e.target;!(t.tagName==="BUTTON"&&t.classList.contains("k-button"))&&!t.isContentEditable&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&(this.lastFocusedElement=null,this.lastSelection=null)},async writeToClipboard(e,t){if(this.activeChar=e,this.categoryIndex=t,setTimeout(()=>{this.activeChar=null,this.categoryIndex=null},2e3),this.clipboard)try{await navigator.clipboard.writeText(e)}catch{const n=`Failed writing "${e}" to clipboard. The Clipboard API is only available to secure contexts (HTTPS).`;console.error(n),this.$store.dispatch("notification/error",n)}else if(this.lastFocusedElement){if(this.lastFocusedElement.isContentEditable){const n=window.getSelection();n.removeAllRanges(),n.addRange(this.lastSelection);const s=n.getRangeAt(0),l=document.createTextNode(e);s.insertNode(l),s.setStartAfter(l),s.setEndAfter(l),this.lastSelection=s.cloneRange(),n.removeAllRanges(),n.addRange(s)}else if(this.lastFocusedElement.tagName==="INPUT"||this.lastFocusedElement.tagName==="TEXTAREA"){const n=this.lastFocusedElement.selectionStart,s=this.lastFocusedElement.selectionEnd;this.lastFocusedElement.value=this.lastFocusedElement.value.substring(0,n)+e+this.lastFocusedElement.value.substring(s),this.lastFocusedElement.selectionStart=this.lastFocusedElement.selectionEnd=n+e.length,this.lastFocusedElement.focus()}}}}};var u=function(){var t=this,n=t._self._c;return n("k-section",{attrs:{label:t.label}},[n("k-box",{attrs:{theme:t.theme}},[n("div",{staticClass:"container kps-space-y-1"},t._l(t.text,function(s,l){return n("div",{key:l,staticClass:"group"},[n("div",{staticClass:"kps-flex kps-items-center kps-gap-2"},[n("span",[t._v(t._s(s.label)+":")]),n("k-button-group",{staticClass:"kps-gap-1"},t._l(s.chars,function(a,o){return n("k-button",{key:o,class:[l===t.categoryIndex&&a===t.activeChar&&"kps-outline kps-outline-2 kps-outline-[var(--color-focus)]"],attrs:{variant:"filled",size:"xs"},on:{click:function(p){return t.writeToClipboard(a,l)}}},[t._v(" "+t._s(a)+" ")])}),1)],1),s.help?n("k-text",{staticClass:"kps-text-[var(--color-text-dimmed)]",attrs:{html:s.help}}):t._e()],1)}),0)])],1)},d=[],h=c(r,u,d,!1,null,"b6965683");const m=h.exports;window.panel.plugin("johannschopplich/punctuation-section",{sections:{punctuation:m}})})();
