(function(){"use strict";function c(e,t,s,n,l,a,o,p){var i=typeof e=="function"?e.options:e;return t&&(i.render=t,i.staticRenderFns=s,i._compiled=!0),i._scopeId="data-v-"+a,{exports:e,options:i}}const r={props:{fieldsets:{type:Object,required:!0},clipboard:{type:Boolean,default:!1}},data(){return{label:null,text:[],theme:null,activeChar:null,categoryIndex:null,lastFocusedElement:null,lastSelection:null}},async created(){const e=await this.load();this.label=e.label,this.theme=e.theme||"none",this.text=this.fieldsets.map(t=>({...t,label:this.t(t.label),help:t.help?this.t(t.help):!1}))},mounted(){document.addEventListener("focus",this.handleEditabeFocus,{capture:!0}),document.addEventListener("blur",this.handleInputBlur,{capture:!0}),document.addEventListener("click",this.handleDocumentClick)},beforeDestroy(){document.removeEventListener("focus",this.handleEditabeFocus,{capture:!0}),document.removeEventListener("blur",this.handleInputBlur,{capture:!0}),document.removeEventListener("click",this.handleDocumentClick)},methods:{t(e){return!e||typeof e=="string"?e:e[this.$panel.translation.code]??Object.values(e)[0]},handleEditabeFocus(e){const t=e.target;t.isContentEditable&&(this.lastFocusedElement=t,this.lastSelection=window.getSelection().getRangeAt(0).cloneRange())},handleInputBlur(e){const t=e.target;(t.tagName==="INPUT"||t.tagName==="TEXTAREA")&&(this.lastFocusedElement=t,this.lastSelection={start:t.selectionStart,end:t.selectionEnd})},handleDocumentClick(e){const t=e.target;!(t.tagName==="BUTTON"&&t.classList.contains("k-button"))&&!t.isContentEditable&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&(this.lastFocusedElement=null,this.lastSelection=null)},async writeToClipboard(e,t){if(this.activeChar=e,this.categoryIndex=t,setTimeout(()=>{this.activeChar=null,this.categoryIndex=null},2e3),this.clipboard)try{await navigator.clipboard.writeText(e)}catch{const s=`Failed writing "${e}" to clipboard. The Clipboard API is only available to secure contexts (HTTPS).`;console.error(s),this.$store.dispatch("notification/error",s)}else if(this.lastFocusedElement){if(this.lastFocusedElement.isContentEditable){const s=window.getSelection();s.removeAllRanges(),s.addRange(this.lastSelection);const n=s.getRangeAt(0),l=document.createTextNode(e);n.insertNode(l),n.setStartAfter(l),n.setEndAfter(l),this.lastSelection=n.cloneRange(),s.removeAllRanges(),s.addRange(n)}else if(this.lastFocusedElement.tagName==="INPUT"||this.lastFocusedElement.tagName==="TEXTAREA"){const s=this.lastFocusedElement.selectionStart,n=this.lastFocusedElement.selectionEnd;this.lastFocusedElement.value=this.lastFocusedElement.value.substring(0,s)+e+this.lastFocusedElement.value.substring(n),this.lastFocusedElement.selectionStart=this.lastFocusedElement.selectionEnd=s+e.length,this.lastFocusedElement.focus()}}}}};var u=function(){var t=this,s=t._self._c;return s("k-section",{attrs:{label:t.label}},[s("k-box",{attrs:{theme:t.theme}},[s("div",{staticClass:"container kps-space-y-1"},t._l(t.text,function(n,l){return s("div",{key:l,staticClass:"group"},[s("div",{staticClass:"kps-flex kps-items-center kps-gap-2"},[s("span",[t._v(t._s(n.label)+":")]),s("k-button-group",{staticClass:"kps-gap-1"},t._l(n.chars,function(a,o){return s("k-button",{key:o,class:[l===t.categoryIndex&&a===t.activeChar&&"kps-outline kps-outline-2 kps-outline-[var(--color-focus)]"],attrs:{variant:"filled",size:"xs"},on:{click:function(p){return t.writeToClipboard(a,l)}}},[t._v(" "+t._s(a)+" ")])}),1)],1),n.help?s("k-text",{staticClass:"kps-text-[var(--color-text-dimmed)]",attrs:{html:n.help}}):t._e()],1)}),0)])],1)},d=[],h=c(r,u,d,!1,null,"57e73c97");const m=h.exports;window.panel.plugin("johannschopplich/punctuation-section",{sections:{punctuation:m}})})();
