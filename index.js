(function(){"use strict";const m={props:{blueprint:String,lock:[Boolean,Object],help:String,name:String,parent:String,timestamp:Number},methods:{load(){return this.$api.get(`${this.parent}/sections/${this.name}`)}}};function f(t,e,s,n,a,r,c,d){var i=typeof t=="function"?t.options:t;e&&(i.render=e,i.staticRenderFns=s,i._compiled=!0),n&&(i.functional=!0),r&&(i._scopeId="data-v-"+r);var l;if(c?(l=function(o){o=o||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!o&&typeof __VUE_SSR_CONTEXT__<"u"&&(o=__VUE_SSR_CONTEXT__),a&&a.call(this,o),o&&o._registeredComponents&&o._registeredComponents.add(c)},i._ssrRegister=l):a&&(l=d?function(){a.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(i.functional){i._injectStyles=l;var v=i.render;i.render=function(F,h){return l.call(h),v(F,h)}}else{var u=i.beforeCreate;i.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:i}}const p={mixins:[m],props:{fieldsets:{type:Object,required:!0}},data(){return{label:null,text:[],theme:null,clipboard:!1,activeChar:null,categoryIndex:null,lastFocusedElement:null,lastSelection:null}},async created(){document.addEventListener("focus",this.trackEditableFocus,{capture:!0}),document.addEventListener("blur",this.trackEditableFocus,{capture:!0});const t=await this.load();this.label=t.label,this.theme=t.theme||"none",this.clipboard=t.clipboard||!1,this.text=this.fieldsets.map(e=>({...e,label:this.t(e.label),help:e.help?this.t(e.help):!1}))},beforeDestroy(){document.removeEventListener("focus",this.trackEditableFocus,{capture:!0}),document.removeEventListener("blur",this.trackEditableFocus,{capture:!0})},methods:{t(t){var e;return typeof t=="string"?t:(t==null?void 0:t[(e=this.$language)==null?void 0:e.code])??Object.values(t)[0]},trackEditableFocus(t){const e=t.target;e.isContentEditable?(this.lastFocusedElement=e,this.lastSelection=window.getSelection().getRangeAt(0).cloneRange()):(e.tagName==="INPUT"||e.tagName==="TEXTAREA")&&(this.lastFocusedElement=e,this.lastSelection={start:t.target.selectionStart,end:t.target.selectionEnd})},async writeToClipboard(t,e){if(this.activeChar=t,this.categoryIndex=e,setTimeout(()=>{this.activeChar=null,this.categoryIndex=null},2e3),this.clipboard)try{await navigator.clipboard.writeText(t)}catch{const n=`Failed writing "${t}" to clipboard. The Clipboard API is only available to secure contexts (HTTPS).`;console.error(n),this.$store.dispatch("notification/error",n)}else if(this.lastFocusedElement){if(this.lastFocusedElement.isContentEditable){const s=window.getSelection();s.removeAllRanges(),s.addRange(this.lastSelection);const n=s.getRangeAt(0),a=document.createTextNode(t);n.insertNode(a),n.setStartAfter(a),n.setEndAfter(a),s.removeAllRanges(),s.addRange(n)}else if(this.lastFocusedElement.tagName==="INPUT"||this.lastFocusedElement.tagName==="TEXTAREA"){const s=this.lastFocusedElement.selectionStart,n=this.lastFocusedElement.selectionEnd;this.lastFocusedElement.value=this.lastFocusedElement.value.substring(0,s)+t+this.lastFocusedElement.value.substring(n),this.lastFocusedElement.selectionStart=this.lastFocusedElement.selectionEnd=s+t.length,this.lastFocusedElement.focus()}}}}};var g=function(){var e=this,s=e._self._c;return s("k-section",{attrs:{headline:e.label}},[s("k-box",{attrs:{theme:e.theme}},[s("div",{staticClass:"space-y-2"},e._l(e.text,function(n,a){return s("div",{key:a},[s("div",{staticClass:"flex items-center gap-2"},[s("span",[e._v(e._s(n.label)+":")]),s("div",{staticClass:"flex items-center gap-1"},e._l(n.chars,function(r,c){return s("k-button",{key:c,class:[a===e.categoryIndex&&r===e.activeChar&&"outline outline-2 outline-[var(--color-focus)]"],attrs:{variant:"filled",size:"xs"},on:{click:function(d){return e.writeToClipboard(r,a)}}},[e._v(" "+e._s(r)+" ")])}),1)]),n.help?s("k-text",{staticClass:"text-[var(--color-text-dimmed)]",attrs:{html:n.help}}):e._e()],1)}),0)])],1)},_=[],b=f(p,g,_,!1,null,null,null,null);const E=b.exports,C="";window.panel.plugin("johannschopplich/punctuation-section",{sections:{punctuation:E}})})();
