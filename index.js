(function(){"use strict";function c(t,e,s,n,l,a,o,p){var i=typeof t=="function"?t.options:t;return e&&(i.render=e,i.staticRenderFns=s,i._compiled=!0),i._scopeId="data-v-"+a,{exports:t,options:i}}const r={props:{fieldsets:{type:Object,required:!0},clipboard:{type:Boolean,default:!1}},data(){return{label:null,text:[],theme:null,activeChar:null,categoryIndex:null,lastFocusedElement:null,lastSelection:null}},async created(){const t=await this.load();this.label=t.label,this.theme=t.theme||"none",this.text=this.fieldsets.map(e=>({...e,label:this.t(e.label),help:e.help?this.t(e.help):!1}))},mounted(){document.addEventListener("focus",this.handleEditabeFocus,{capture:!0}),document.addEventListener("blur",this.handleInputBlur,{capture:!0}),document.addEventListener("click",this.handleDocumentClick)},beforeDestroy(){document.removeEventListener("focus",this.handleEditabeFocus,{capture:!0}),document.removeEventListener("blur",this.handleInputBlur,{capture:!0}),document.removeEventListener("click",this.handleDocumentClick)},methods:{t(t){return!t||typeof t=="string"?t:t[this.$panel.translation.code]??Object.values(t)[0]},handleEditabeFocus(t){const e=t.target;e.isContentEditable&&(this.lastFocusedElement=e,this.lastSelection=window.getSelection().getRangeAt(0).cloneRange())},handleInputBlur(t){const e=t.target;(e.tagName==="INPUT"||e.tagName==="TEXTAREA")&&(this.lastFocusedElement=e,this.lastSelection={start:e.selectionStart,end:e.selectionEnd})},handleDocumentClick(t){const e=t.target;!(e.tagName==="BUTTON"&&e.classList.contains("k-button"))&&!e.isContentEditable&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&(this.lastFocusedElement=null,this.lastSelection=null)},async writeToClipboard(t,e){if(this.activeChar=t,this.categoryIndex=e,setTimeout(()=>{this.activeChar=null,this.categoryIndex=null},2e3),this.clipboard)try{await navigator.clipboard.writeText(t)}catch{const n=`Failed writing "${t}" to clipboard. The Clipboard API is only available to secure contexts (HTTPS).`;console.error(n),this.$store.dispatch("notification/error",n)}else if(this.lastFocusedElement){if(this.lastFocusedElement.isContentEditable){const s=window.getSelection();s.removeAllRanges(),s.addRange(this.lastSelection);const n=s.getRangeAt(0),l=document.createTextNode(t);n.insertNode(l),n.setStartAfter(l),n.setEndAfter(l),this.lastSelection=n.cloneRange(),s.removeAllRanges(),s.addRange(n)}else if(this.lastFocusedElement.tagName==="INPUT"||this.lastFocusedElement.tagName==="TEXTAREA"){const s=this.lastFocusedElement.selectionStart,n=this.lastFocusedElement.selectionEnd;this.lastFocusedElement.value=this.lastFocusedElement.value.substring(0,s)+t+this.lastFocusedElement.value.substring(n),this.lastFocusedElement.selectionStart=this.lastFocusedElement.selectionEnd=s+t.length,this.lastFocusedElement.focus()}}}}};var u=function(){var e=this,s=e._self._c;return s("k-section",{attrs:{label:e.label}},[s("k-box",{attrs:{theme:e.theme}},[s("div",{staticClass:"container kps-space-y-1"},e._l(e.text,function(n,l){return s("div",{key:l,staticClass:"group"},[s("div",{staticClass:"kps-flex kps-items-center kps-gap-2"},[s("span",[e._v(e._s(n.label)+":")]),s("k-button-group",{staticClass:"kps-gap-1"},e._l(n.chars,function(a,o){return s("k-button",{key:o,class:[l===e.categoryIndex&&a===e.activeChar&&"kps-outline kps-outline-2 kps-outline-[var(--color-focus)]"],attrs:{variant:"filled",size:"xs"},on:{click:function(p){return e.writeToClipboard(a,l)}}},[e._v(" "+e._s(a)+" ")])}),1)],1),n.help?s("k-text",{staticClass:"kps-text-[var(--color-text-dimmed)]",attrs:{html:n.help}}):e._e()],1)}),0)])],1)},d=[],h=c(r,u,d,!1,null,"7e5f9279");const m=h.exports;window.panel.plugin("johannschopplich/punctuation-section",{sections:{punctuation:m}})})();
